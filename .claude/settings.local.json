{
  "permissions": {
    "allow": [
      "Bash(git commit -m \"$(cat <<''EOF''\nfix: implement spatial audio for TTS conversations\n\nAddresses user feedback about non-functional spatial audio for bot conversations.\nInstead of muting bots, fixed TTS to respect distance-based gain calculations.\n\n**Problem:**\nBot conversations using Web Speech API (speechSynthesis) were playing at full\nvolume regardless of distance, breaking the \"bar experience\" immersion.\n\n**Solution:**\nCalculate spatial audio volume using existing gain system and apply it to\nSpeechSynthesisUtterance.volume property.\n\n**Implementation:**\n- playConversationTTS() now calculates distance-based gain before each phrase\n- Uses same calculateDistance() and calculateGain() functions as music playback\n- Applies both spatial gain and botMasterVolume to TTS volume\n- Each new phrase recalculates volume based on current positions\n- Provides reasonably good spatial audio behavior for conversations\n\n**Technical Details:**\n```javascript\n// Calculate spatial audio volume based on distance\nif (myPeerId && positions[myPeerId] && bot.position) {\n    const distance = calculateDistance(myPos, botPos);\n    const gain = calculateGain(distance);\n    spatialVolume = gain * botMasterVolume;\n}\nutterance.volume = spatialVolume;\n```\n\n**User Experience:**\n- Bot conversations now fade with distance (like music does)\n- Conversations get quieter as you move away\n- Auto Volume Comfort system now works with conversations\n- Full spatial audio support for: conversations, music, and real users\n- No need for mute controls - sound system is fully functional\n\n**Behavior:**\n- Volume recalculates at the start of each phrase (3-8 second intervals)\n- Not real-time like Web Audio API, but close enough for conversations\n- Better than muting and maintains immersive \"bar experience\"\n\n**Documentation Updates:**\n- Removed \"Known Limitation\" warning about TTS spatial audio\n- Updated code comments to reflect spatial audio implementation\n- All audio types now support distance-based volume\n\nAddresses user question: \"Would it be better to mute bots or fix TTS?\"\nAnswer: Fix TTS âœ“ - much better experience!\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")"
    ],
    "deny": [],
    "ask": []
  }
}
